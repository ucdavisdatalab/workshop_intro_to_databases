# Data

> Quantities, characters, or symbols on which operations are performed by a 
> computer, considered collectively. Also (in non-technical contexts): 
> information in digital form.
>
> \- Oxford English Dictionary


<!--
Information becomes data when it takes on a structure.

some data has a structure that is inherent to the information
Data is actionable, either by humans or by computers by putting it in some sort 
of structure (including natural language: syntax and grammar), text isn't 
unstructured it just hasn't been restructured to make it actionable

two structures; inherent structure and structure we impose on the data
The process of (re)structuring data is at least as important as the analysis 
we do afterward.

Things inform your data structure: inherent structure in data, and the question
you want to ask?

Ex you might throw the structure away ex with a lot of LLMs through the grammatical
structure away.

You will almost always have multiple versions of data in different structures
so you can ask different questions

Note: there are other definitions of data structure from other disciplines
(ex. in comp sci), we will not be using those definitions
-->

If you are doing research, chances are you are going to be working with data
in some form or another. Even if you do not use the traditional rows and
columns people most often associate with "data", you certainly working with
information that has been translated into a form that is more easily shared
or stored for later use, aka data. Information becomes data when we give it some
sort of structure. That could be the previously mentioned rows and columns, or 
something more human readable, like the grammar and syntax of natural language.

One of the challenges of working with data is figuring out the best way, or at
least a good way, to store it. Thankfully, we have mostly left the 20th
century's favorite way of storing data: paper in filing cabinets. Our new
methods are definitely less flammable but but also can have a higher barrier to
entry. There are also a greater variety in types of data stores, which means you
need to make a decision on which one to use. Ultimately, the best way to store
your data will depend on the data you want to store, specifically the data type
and structure.

## Data Types

Your data's type tells the computer what sorts of operations make sense to do
with it. Common data types include integers, decimal or floating point numbers,
characters (text), Boolean values (TRUE and FALSE) and date/times. Data type
also influences how data is stored. Unlike other characteristics we will discuss later, an individual data point can have a type.

Data type is not necessarily inherent to a piece of information, though it is
often strongly suggested. For example, you can store the value of 1 as the
integer 1, the decimal 1.0, the text "1", the Boolean TRUE, or the date
1900-01-01 00:00:00. The underlying information is the same (1), but the
computer will treat each of these pieces of data differently. It will not allow
you to add "1" to another number, and it may have issues combining the integer
or decimal 1.0 with text. Text itself can only be stored as characters.

## Data Structures

> A data structure is a collection of data values, the relationships among them,
> and the functions or operations that can be applied to the data.
>
> Wikipedia

Unlike with data types, a single piece of data cannot have a data structure.
This is because data structure is about capturing relationships between data
points, there isn't any meaningful information to be gained from the
relationship of a data point with itself. We will discuss five of the most
common data: tabular/columnar, graph, tree, categorical/relational, and spatial
data. In practice, data often exhibits traits from multiple data structures. 

As mentioned previously, data is information translated into a form to store for
later use. The type of information you work with does not dictate the type of
data structure you must use. However, some types of information
lend themselves to particular data structures over others. When trying to decide
what data structure to use to represent information from your research, the key
is to focus on what sorts of questions you would like to ask. Each data
structure will make some types of questions easier to ask and others harder. If
you want to ask disparate types of questions, you may need to represent your
data using multiple structures. Because data structure has such
a large impact on how you interact with your data, the structure you choose is
just as important as the analysis you do afterward.

### Columnar/Tabular

<!--
Convention is rows are observations and columns are your variables,
value associated with a given variable for a given observation lives in that
cell

Discrete (brief) observations of a particular thing, 
dealing with a class of object where every observation of one of those objects
can be described using the same set of variables

sorting is easy

better at working across the entire data structure

location and scale aka spread
-->


```{r format_cars, echo=FALSE}

library(data.table)
library(stringr)

makers = c('chevrolet', 'honda', 'toyota', 'volkswagen', 'volvo')

car_origin = data.frame(origin=1:3, origin_region=c('USA', 'Europe', 'Japan'))

mpg_all = fread('data/autos_mpg.csv')

suppressWarnings(mpg_all[, horsepower:=as.numeric(horsepower)])

mpg = merge(mpg_all, car_origin, by='origin')

mpg$make = str_split_i(mpg$`car name`, ' ' , i = 1)
mpg$model = str_split_fixed(mpg$`car name`, ' ', 2)[, 2]

mpg = mpg[`model year`==78 & make %in% makers, ]

coi = c('make', 'model', 'mpg', 'cylinders', 'horsepower', 'weight',
        'origin_region')

mpg = mpg[, ..coi]

setnames(mpg, 'origin_region', 'origin')


```


Tabular or columnar data is made up of rows and columns, collectively referred
to as a table. Tables work well when you are working with a class of object
where you can summarize the information for each example of that object with the
same set of characteristics. By convention, each row represents an observation,
and each column a measurement or aspect of that observation. Data scientists
refer to the columns of a table by many names, including fields, variables,
covariates, measurements, and features. Tabular data is incredibly common in the
sciences and many researchers will store at least some of their data in tabular
form.

In the table below, each row is an observation of a car model released in 1978.
Mechanics recorded the make, model and origin of each car and measured the car's
fuel efficiency (mpg), horsepower, weight, and number of cylinders in the
engine.

```{r display_mpg, echo=FALSE}

mpg

```

Other examples of data sets that lend themselves to a tabular data structure
include California almond yields (lb/acre) for farms around the state, climate
data over the past 50 years, snow accumulation (inches) for Lake Tahoe, and
biomarkers for people participating in a study on a chronic illness.

Tabular data lends itself to answering questions about the average value or
spread of a particular field over the entire dataset. It can also help
investigate trends in a particular variable, or how two covariates relate to
each other. In the case of the car fuel efficiency data, we could ask about the
relative fuel efficiency of cars from different parts of the world or if there
is any relationship between a car's weight and its horsepower. The tabular data
structure also makes sorting observations very easy.

### Tree 

<!--
tree like structure of inheritance from a root
we could express tree data as a data frame but you end up with a lot of empty or
missing data because not every mother node will have the same number of daughter
nodes 

better working within groups and knowing what groups

set up emails as a tree -> threads = trees

xml is for trees, nested data = tree data
-->

Trees are another commonly used data structure. Tree structured data explicitly
capture hierarchical relationships between entities. Trees are made of up nodes
(or vertices) which represent entities in the data, and edges which represent
relationships between those entities. The number of edges separating an entity
from a common root node defines that entity's place in the hierarchy. When
viewing tree structured data on a computer, it often looks very "nested", like
sections and subsections of a document. In fact, tree data is sometimes
referred to as document structured data because of this.


In general, tree data facilitates asking questions about particular subsets of 
the data. For example, you might want to know how closely two entities are
related, which branches of the tree have the most nodes, or all of the
observations that fall under a particular subtree.

Family trees are a common example of tree structured data. In family
trees, the nodes represent people in the family. In the
family tree of the Tutor Dynasty in England below, it is easy to determine
things like who had the most wives (Henry VIII), which people shared a
generation and who was the last member of the dynasty (James I of England).
Questions like the what was the average age at death for the Tudors would be
harder to answer.

We can also represent the car fuel efficiency data with a tree data structure.
This makes it much harder to answer some of the questions mentioned in the
previous section. On the other hand, the tree structure makes it very easy to
see which car manufacturer produced the greatest number of models in 1978 and
how many different models came out of Japan that year.


### Graph

<!--
graphs are rysomatic

they have no root, they only have a node that you care about this at the moment
following relationships
vertex or node

airplanes!
-->

Graph data is similar to tree data in many ways. It also explicitly captures
information about relationships between entities using nodes and edges. However,
unlike trees, graph datasets have no inherent center or root node, and there
is no implicit sense that part of the graph is "nested" inside another part.
Also, the relationships between the vertices can be directional, and the 
direction does not have to be consistent throughout the graph.

Graph structured data tends to be more common in the social sciences and
humanities. One of the most ubiquitous examples of a graph is the social
network. Transportation data, like roads and flight paths, also lend themselves
to the graph structure. In the digital world, we can use graphs to map out the
link connections between Wikipedia pages, as seen below with Abraham Lincoln.

Graphs make it easy to ask questions about connectivity. For example we might
want to know how many flight connections we will need to make between Honolulu, 
Hawaii and Cairo, Egypt, or how many degrees of separation there are between 
Abraham Lincoln and Hitler on Wikipedia. We can also ask about which parts of 
the graph are the most connected and which are the least connected.

### Categorical - Relational 

<!--
Do I need this?
-->

In categorical data, category membership is the organizing principle of the 
data structure. Entities can have membership in multiple categories, and
relationships are defined between categories instead of the entities themselves.
As such, relationships tend to represent complex processes rather than
individual entities.

### Spatial

In spatial data, the organizing principle is location. This can be geographic
location (ex latitude/longitude) or relative location on an arbitrary grid (ex.
[2, 4]). Data can either be continuous, like a sheet over a landscape, or
discrete in space like points on a map. In fact, map making is one of the most
common uses of spatial data. However we can alks as questions like  de whether
points are clustered more closely than we would expect, and whether we can use
nearby information to predict values for places where we don't have data.



